# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–µ –≤–µ—Å–æ–≤

–≠—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–µ—Å–æ–≤ –í–¢–ê-60 –≤ NK Backoffice.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
```bash
git clone <repository>
cd nova-field
npm install
npm run dev  # –ó–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ
```

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –≤–µ—Å–æ–≤
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Chrome/Edge)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ**  
3. –í–∫–ª—é—á–∏—Ç–µ **"–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏"** –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. –ù–∞–∂–º–∏—Ç–µ **"–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –í–¢–ê-60"** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```
client/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ ScaleService.ts           # üîß –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–µ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ EquipmentService.ts       # üè≠ –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è  
‚îÇ   ‚îî‚îÄ‚îÄ BarcodeScannerService.ts  # üì± –°–µ—Ä–≤–∏—Å —Å–∫–∞–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useEquipment.ts           # ‚ö° React —Ö—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îú‚îÄ‚îÄ contexts/ 
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx           # üåç –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ScaleWeightDisplay.tsx    # üìä UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Å–∞
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ SettingsEquipment.tsx     # ‚öôÔ∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ boxes.ts                  # üì¶ –¢–∏–ø—ã –¥–ª—è –≤–µ—Å–æ–≤
```

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å
```
server/
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ settings.ts               # üõ£Ô∏è API –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ settingsService.ts        # üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. Service Layer Pattern
```typescript
// –ö–∞–∂–¥—ã–π —Ç–∏–ø –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å
class ScaleService {
    private port: SerialPort | null = null;
    private config: ScaleConnectionConfig;
    
    async connect(): Promise<boolean> { /* */ }
    async readScaleOnce(): Promise<VTAScaleData> { /* */ }
}

class BarcodeScannerService {
    private isConnected: boolean = false;
    
    async connect(): Promise<boolean> { /* */ }
    simulateScan(): BarcodeData { /* */ }
}
```

### 2. Hook-based State Management
```typescript
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ —Ö—É–∫
const useEquipment = (): [EquipmentState, EquipmentActions] => {
    const [currentWeight, setCurrentWeight] = useState<VTAScaleData | null>(null);
    const [isScaleConnected, setIsScaleConnected] = useState(false);
    
    const connectScale = useCallback(async () => { /* */ }, []);
    
    return [state, actions];
};
```

### 3. Context Provider Pattern  
```typescript
// –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ AuthContext
export const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {
    const [equipmentState, equipmentActions] = useEquipment();
    
    return (
        <AuthContext.Provider value={{ equipmentState, equipmentActions }}>
            {children}
        </AuthContext.Provider>
    );
};
```

## ‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ API

### ScaleService API

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–µ—Å–∞–º
```typescript
const scaleService = new ScaleService();

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç)
const success = await scaleService.connect(true);

// –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä –ø–æ—Ä—Ç–∞
const success = await scaleService.connect(false);
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```typescript
// –†–∞–∑–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –æ–ø—Ä–æ—Å–∞
const data = await scaleService.readScaleOnce(true);
console.log({
    weight: data.weight,    // 1.234 –∫–≥  
    price: data.price,      // 45.60 –≥—Ä–Ω/–∫–≥
    total: data.total,      // 56.32 –≥—Ä–Ω
    rawData: data.rawData   // Uint8Array(18)
});

// –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–µ—Å–∞  
const weight = await scaleService.getCurrentWeight();
```

#### Callbacks –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
```typescript
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ—Å–∞
scaleService.onWeightData((data: VTAScaleData) => {
    console.log(`–ù–æ–≤—ã–π –≤–µ—Å: ${data.weight} –∫–≥`);
});

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
scaleService.onRawDataReceived((rawData: Uint8Array) => {
    const hex = Array.from(rawData)
        .map(b => b.toString(16).padStart(2, '0'))
        .join(' ');
    console.log(`–°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ: ${hex}`);
});
```

### useEquipment Hook API

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
```typescript
const MyComponent = () => {
    const [equipmentState, equipmentActions] = useEquipment();
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    if (equipmentState.isScaleConnected) {
        console.log('–í–µ—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã');
    }
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ—Å–∞
    const handleGetWeight = async () => {
        const weight = await equipmentActions.getWeight();
        if (weight) {
            console.log(`–¢–µ–∫—É—â–∏–π –≤–µ—Å: ${weight.weight} –∫–≥`);
        }
    };
    
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Å–æ–≤
    const handleConnect = async () => {
        const success = await equipmentActions.connectScale();
        console.log(success ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è');
    };
};
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –ë–î
await equipmentActions.loadConfig();

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
const newConfig: EquipmentConfig = {
    connectionType: 'local',
    scale: {
        baudRate: 4800,
        parity: 'even',
        autoConnect: true
    }
};
await equipmentActions.saveConfig(newConfig);
```

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –≤–µ—Å–∞–º–∏

```typescript
// NewWeightComponent.tsx
import React from 'react';
import { useEquipmentFromAuth } from '../contexts/AuthContext';

export const NewWeightComponent: React.FC = () => {
    const [equipmentState] = useEquipmentFromAuth();
    
    return (
        <div>
            <h3>–¢–µ–∫—É—â–∏–π –≤–µ—Å</h3>
            {equipmentState.currentWeight ? (
                <p>{equipmentState.currentWeight.weight} –∫–≥</p>
            ) : (
                <p>–î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã</p>
            )}
        </div>
    );
};
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ hook

```typescript
// useScaleWeight.ts
import { useCallback, useEffect, useState } from 'react';
import { useEquipmentFromAuth } from '../contexts/AuthContext';
import { VTAScaleData } from '../services/ScaleService';

export const useScaleWeight = () => {
    const [equipmentState, equipmentActions] = useEquipmentFromAuth();
    const [isLoading, setIsLoading] = useState(false);
    
    const refreshWeight = useCallback(async () => {
        setIsLoading(true);
        try {
            await equipmentActions.getWeight();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Å–∞:', error);
        } finally {
            setIsLoading(false);
        }
    }, [equipmentActions]);
    
    return {
        currentWeight: equipmentState.currentWeight,
        isConnected: equipmentState.isScaleConnected,
        isLoading,
        refreshWeight
    };
};
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
// ErrorBoundary –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –≤–µ—Å–æ–≤
class ScaleErrorBoundary extends React.Component {
    constructor(props) {
        super(props);
        this.state = { hasError: false };
    }
    
    static getDerivedStateFromError(error) {
        return { hasError: true };
    }
    
    componentDidCatch(error, errorInfo) {
        console.error('Scale system error:', error, errorInfo);
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    }
    
    render() {
        if (this.state.hasError) {
            return <ScaleErrorFallback />;
        }
        
        return this.props.children;
    }
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã –¥–ª—è ScaleService
```typescript
// ScaleService.test.ts
import ScaleService from '../services/ScaleService';

describe('ScaleService', () => {
    let scaleService: ScaleService;
    
    beforeEach(() => {
        scaleService = new ScaleService();
    });
    
    test('–¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç—å —Ü–∏—Ñ—Ä–æ–±–∞–π—Ç—ã', () => {
        const digits = new Uint8Array([0x01, 0x02, 0x03, 0x04, 0x05, 0x06]);
        const result = scaleService['digits6ToNumber'](digits);
        expect(result).toBe(654321); // –ú–ª–∞–¥—à–∏–µ —Ä–∞–∑—Ä—è–¥—ã –ø–µ—Ä–≤—ã–º–∏
    });
    
    test('–¥–æ–ª–∂–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å—É —Å 3 –∑–Ω–∞–∫–∞–º–∏', () => {
        const digits = new Uint8Array([0x01, 0x02, 0x03, 0x04, 0x05, 0x06]);
        const result = scaleService['formatMassFromDigits'](digits, 3);
        expect(result).toBe(654.321); // 654321 / 1000
    });
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```typescript
// Equipment.integration.test.ts
import { renderHook, act } from '@testing-library/react-hooks';
import { useEquipment } from '../hooks/useEquipment';

describe('Equipment Integration', () => {
    test('–¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤–µ—Å–∞–º', async () => {
        const { result } = renderHook(() => useEquipment());
        
        await act(async () => {
            const success = await result.current[1].connectScale();
            expect(success).toBe(true);
        });
        
        expect(result.current[0].isScaleConnected).toBe(true);
    });
});
```

### –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ Web Serial API
```typescript
// setupTests.ts
global.navigator.serial = {
    requestPort: jest.fn().mockResolvedValue({
        open: jest.fn().mockResolvedValue(undefined),
        close: jest.fn().mockResolvedValue(undefined),
        readable: {
            getReader: jest.fn().mockReturnValue({
                read: jest.fn().mockResolvedValue({
                    value: new Uint8Array([1, 2, 3]),
                    done: false
                }),
                releaseLock: jest.fn()
            })
        }
    }),
    getPorts: jest.fn().mockResolvedValue([])
};
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –í development —Ä–µ–∂–∏–º–µ
if (process.env.NODE_ENV === 'development') {
    console.log('üîß ScaleService: –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è');
}

// –í—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏
console.error('‚ùå ScaleService: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞');

// –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
console.log('‚úÖ ScaleService: –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
```

### Chrome DevTools –¥–ª—è Web Serial
1. –û—Ç–∫—Ä–æ–π—Ç–µ **DevTools** ‚Üí **Application** ‚Üí **Storage**
2. –ù–∞–π–¥–∏—Ç–µ **"Serial Ports"** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Console** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
console.log('Serial support:', 'serial' in navigator);

// –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤  
navigator.serial.getPorts().then(console.log);
```

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
```typescript
// –î–æ–±–∞–≤—å—Ç–µ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
if (process.env.NODE_ENV === 'development') {
    (window as any).scaleDebug = {
        connectScale: () => scaleService.connect(),
        getWeight: () => scaleService.getCurrentWeight(),
        rawCommand: (cmd: number[]) => scaleService.sendCustomCommand(cmd)
    };
}
```

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –≤–µ—Å–æ–≤
```typescript
// NewScaleProtocol.ts
interface CustomScaleProtocol {
    startByte: number;
    endByte: number;
    dataLength: number;
    parseResponse(data: Uint8Array): ScaleData;
}

class CustomScaleService extends ScaleService {
    protected protocol: CustomScaleProtocol = {
        startByte: 0x02,
        endByte: 0x03,
        dataLength: 12,
        parseResponse: (data) => { /* –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ */ }
    };
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
```typescript
// –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
interface ExtendedScaleData extends VTAScaleData {
    temperature?: number;   // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
    humidity?: number;      // –í–ª–∞–∂–Ω–æ—Å—Ç—å  
    batteryLevel?: number;  // –£—Ä–æ–≤–µ–Ω—å –±–∞—Ç–∞—Ä–µ–∏
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
```typescript
// ScalePlugin.ts
interface ScalePlugin {
    name: string;
    onConnect?(service: ScaleService): void;
    onData?(data: VTAScaleData): VTAScaleData;
    onDisconnect?(): void;
}

class LoggingPlugin implements ScalePlugin {
    name = 'logging';
    
    onData(data: VTAScaleData): VTAScaleData {
        console.log(`[${this.name}] Weight: ${data.weight}`);
        return data;
    }
}
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
```typescript
// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤–µ—Å–∞
const CACHE_DURATION = 2000; // 2 —Å–µ–∫—É–Ω–¥—ã

const getWeight = useCallback(async () => {
    const now = Date.now();
    if (lastWeight && (now - lastWeight.timestamp.getTime()) < CACHE_DURATION) {
        return lastWeight; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    }
    
    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    const newWeight = await scaleService.getCurrentWeight();
    setLastWeight(newWeight);
    return newWeight;
}, [lastWeight]);
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const ScaleDisplay = React.memo(({ weight }: { weight: VTAScaleData }) => {
    return <div>{weight.weight} –∫–≥</div>;
});

// –ò—Å–ø–æ–ª—å–∑—É–µ–º useMemo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
const formattedWeight = useMemo(() => {
    return currentWeight ? 
        `${currentWeight.weight.toFixed(3)} –∫–≥` : 
        '---.--- –∫–≥';
}, [currentWeight]);
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
```typescript
// –û—Ç–∫–ª—é—á–µ–Ω–∏–µ debug –ª–æ–≥–æ–≤ –≤ production
const isDevelopment = process.env.NODE_ENV === 'development';

if (isDevelopment) {
    console.log('Debug info');
}
```

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```dockerfile
# Dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

### Environment variables
```env
# .env.production
NODE_ENV=production
VITE_SCALE_DEBUG=false
VITE_API_URL=https://your-api.com
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [Web Serial API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API)
- [React Hooks](https://reactjs.org/docs/hooks-intro.html)
- [TypeScript](https://www.typescriptlang.org/docs/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
- [Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools)
- [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi)
- [Redux DevTools](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [Jest](https://jestjs.io/docs/getting-started)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
- [MSW (Mock Service Worker)](https://mswjs.io/docs/)

---

## ‚ùì FAQ

**Q: –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Web Serial API –≤–º–µ—Å—Ç–æ WebSocket?**
A: Web Serial API –¥–∞–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –ø–æ—Ä—Ç—É, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ –≤–µ—Å–æ–≤?**
A: –î–∞, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ScaleService —Å –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º.

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Bluetooth –≤–µ—Å–æ–≤?**  
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Web Bluetooth API –≤–º–µ—Å—Ç–æ Serial API, —Å–æ–∑–¥–∞–≤ BluetoothScaleService.

**Q: –ü–æ—á–µ–º—É –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã?**
A: –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–∑–ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö UI.

---
*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: –°–µ–Ω—Ç—è–±—Ä—å 2025*  
*–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤: —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏*
