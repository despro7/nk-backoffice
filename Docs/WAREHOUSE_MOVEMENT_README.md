# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥—Å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è–º–∏

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —É—á–µ—Ç–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏ —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∏ —Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é —Ç–æ–≤–∞—Ä–æ–≤.

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Å–∫–ª–∞–¥–∞–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π Dilovod
- –ü–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `warehouse_movement`

–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | INT | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `draftCreatedAt` | DATETIME | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ |
| `draftLastEditedAt` | DATETIME | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) |
| `sentToDilovodAt` | DATETIME | –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Dilovod |
| `internalDocNumber` | VARCHAR(255) | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, —Ñ–æ—Ä–º–∞—Ç: 00001, 00002...) |
| `dilovodDocNumber` | VARCHAR(255) | –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ Dilovod |
| `items` | JSON | –ú–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è |
| `deviations` | JSON | –ú–∞—Å—Å–∏–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π (–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏/–∏–∑–ª–∏—à–∫–∏) |
| `status` | VARCHAR(255) | –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞: `draft`, `sent`, `confirmed`, `cancelled` |
| `sourceWarehouse` | VARCHAR(255) | –ò—Å—Ö–æ–¥–Ω—ã–π —Å–∫–ª–∞–¥ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ ID) |
| `destinationWarehouse` | VARCHAR(255) | –¶–µ–ª–µ–≤–æ–π —Å–∫–ª–∞–¥ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ ID) |
| `notes` | TEXT | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É |
| `createdBy` | INT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç |
| `createdAt` | DATETIME | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updatedAt` | DATETIME | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `status`
- `draftCreatedAt`
- `sentToDilovodAt`
- `sourceWarehouse`
- `destinationWarehouse`
- `createdBy`

### –¢–∞–±–ª–∏—Ü–∞ `stock_movement_history`

–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ –≤—Å–µ–º —Å–∫–ª–∞–¥–∞–º:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | INT | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `productSku` | VARCHAR(255) | SKU —Ç–æ–≤–∞—Ä–∞ |
| `warehouse` | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ ID —Å–∫–ª–∞–¥–∞ |
| `movementType` | VARCHAR(255) | –¢–∏–ø –¥–≤–∏–∂–µ–Ω–∏—è: `in`, `out`, `transfer_in`, `transfer_out`, `adjustment` |
| `quantity` | FLOAT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ |
| `quantityType` | VARCHAR(255) | –¢–∏–ø –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞: `box`, `portion` |
| `batchNumber` | VARCHAR(255) | –ù–æ–º–µ—Ä –ø–∞—Ä—Ç–∏–∏ —Ç–æ–≤–∞—Ä–∞ |
| `referenceId` | VARCHAR(255) | ID —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| `referenceType` | VARCHAR(255) | –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞: `order`, `warehouse_movement`, `adjustment` |
| `previousBalance` | FLOAT | –û—Å—Ç–∞—Ç–æ–∫ –¥–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `newBalance` | FLOAT | –û—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `movementDate` | DATETIME | –î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `notes` | TEXT | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| `createdBy` | INT | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã–ø–æ–ª–Ω–∏–≤—à–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏—é |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `productSku`
- `warehouse`
- `movementType`
- `movementDate`
- `referenceId`
- `referenceType`

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```http
GET /api/warehouse
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `status` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (`draft`, `sent`, `confirmed`, `cancelled`)
- `warehouse` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–∫–ª–∞–¥—É (–ø–æ–∏—Å–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∏–ª–∏ —Ü–µ–ª–µ–≤–æ–º —Å–∫–ª–∞–¥–µ)
- `page` (number, default: 1) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` (number, default: 20) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "movements": [...],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "pages": 5
  }
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /api/warehouse/drafts
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "drafts": [...]
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ ID
```http
GET /api/warehouse/:id
```
**–û—Ç–≤–µ—Ç:** –û–±—ä–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏–ª–∏ –æ—à–∏–±–∫–∞ 404

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```http
POST /api/warehouse
```
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "items": [
    {
      "sku": "PRODUCT-001",
      "boxQuantity": 5.0,
      "portionQuantity": 120,
      "batchNumber": "BATCH-001"
    }
  ],
  "deviations": [],
  "sourceWarehouse": "–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥",
  "destinationWarehouse": "–ú–∞–ª—ã–π —Å–∫–ª–∞–¥",
  "notes": "–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏"
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```http
PUT /api/warehouse/:id
```
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "items": [...],
  "deviations": [...],
  "notes": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è"
}
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Dilovod
```http
POST /api/warehouse/:id/send
```
**–î–µ–π—Å—Ç–≤–∏—è:**
- –ò–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ `sent`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `sentToDilovodAt`
- **–û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤** (–µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã)
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è

#### –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
```http
DELETE /api/warehouse/:id
```
**–î–µ–π—Å—Ç–≤–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ `draft`)
- **–û—Ç–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤** (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –æ–±—Ä–∞—Ç–Ω–æ)
- –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è
- –£–¥–∞–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
```http
GET /api/warehouse/products-for-movement
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫–ª–∞–¥–µ, –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.

**–û—Ç–≤–µ—Ç:**
```json
{
  "products": [
    {
      "id": "PRODUCT-001",
      "sku": "PRODUCT-001",
      "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",
      "balance": "100 / 20",
      "details": {
        "boxes": 0,
        "portions": 0,
        "forecast": 125,
        "batchNumber": ""
      },
      "stockData": {
        "mainStock": 100,
        "kyivStock": 0,
        "smallStock": 20
      }
    }
  ],
  "total": 1
}
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è
```http
GET /api/warehouse/stock/history
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `sku` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ SKU —Ç–æ–≤–∞—Ä–∞
- `warehouse` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–∫–ª–∞–¥—É
- `movementType` (string) - —Ç–∏–ø –¥–≤–∏–∂–µ–Ω–∏—è
- `startDate` (string) - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (ISO 8601)
- `endDate` (string) - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (ISO 8601)
- `page` (number, default: 1)
- `limit` (number, default: 50)

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
```http
GET /api/warehouse/stock/current
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `warehouse` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–∫–ª–∞–¥—É

**–û—Ç–≤–µ—Ç:** –ú–∞—Å—Å–∏–≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É –∏ —Å–∫–ª–∞–¥—É

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç –ø–æ–ª—è `items` (JSON)

–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è:

```json
[
  {
    "sku": "PRODUCT-001",
    "boxQuantity": 5.0,
    "portionQuantity": 120,
    "batchNumber": "BATCH-001"
  },
  {
    "sku": "PRODUCT-002",
    "boxQuantity": 3.5,
    "portionQuantity": 84,
    "batchNumber": "BATCH-002"
  }
]
```

### –§–æ—Ä–º–∞—Ç –ø–æ–ª—è `deviations` (JSON)

–ú–∞—Å—Å–∏–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ (–∏–∑–ª–∏—à–∫–∏/–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏):

```json
[
  {
    "sku": "PRODUCT-001",
    "batchNumber": "BATCH-001",
    "deviation": -2.5  // –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ = –∏–∑–ª–∏—à–µ–∫
  }
]
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫–ª–∞–¥–µ
- –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ —è—â–∏–∫–∞—Ö –∏ –ø–æ—Ä—Ü–∏—è—Ö
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –ø–∞—Ä—Ç–∏–π
- –£–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏ —Ü–µ–ª–µ–≤–æ–≥–æ —Å–∫–ª–∞–¥–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏**

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —á–µ—Ä–Ω–æ–≤–∏–∫
- –ß–µ—Ä–Ω–æ–≤–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å `draft`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `draftLastEditedAt`
- **–û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏** (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ)

#### –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π —á–µ—Ä–Ω–æ–≤–∏–∫
- –ß–µ—Ä–Ω–æ–≤–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å `draft`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤** –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
- –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- **draft** - —á–µ—Ä–Ω–æ–≤–∏–∫ (–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
- **sent** - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Dilovod (–Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
- **confirmed** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –≤ Dilovod
- **cancelled** - –æ—Ç–º–µ–Ω–µ–Ω

### 2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤

#### –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞
- –°–≤—è–∑—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è

#### –¢–∏–ø—ã –¥–≤–∏–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
- **transfer_in** - –ø—Ä–∏—Ö–æ–¥ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏
- **transfer_out** - —Ä–∞—Å—Ö–æ–¥ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏
- **in** - –ø—Ä–∏—Ö–æ–¥ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- **out** - —Ä–∞—Å—Ö–æ–¥ –Ω–∞ –∑–∞–∫–∞–∑—ã
- **adjustment** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤

#### –¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ —Ç–æ–≤–∞—Ä–∞–º –∏ —Å–∫–ª–∞–¥–∞–º
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ SKU –∏ —Å–∫–ª–∞–¥—É
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—è—â–∏–∫–∏/–ø–æ—Ä—Ü–∏–∏)

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- **–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –ø–æ—Ä—Ü–∏–∏** - –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ—Ä—Ü–∏—è–º–∏
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞** - –æ—Å—Ç–∞—Ç–∫–∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—Ü–∏—è—Ö
- **–û—Ç–∫–∞—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏** - —Ç–æ–≤–∞—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–µ —Å–∫–ª–∞–¥—ã –≤ –ø–æ—Ä—Ü–∏—è—Ö
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –≤ –ø–æ—Ä—Ü–∏—è—Ö
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –§–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
- **balance**: `"4432 / 96"` –æ–∑–Ω–∞—á–∞–µ—Ç `4432 –ø–æ—Ä—Ü–∏–∏ / 96 –ø–æ—Ä—Ü–∏–π`
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π
- **–ú–∞–ª—ã–π —Å–∫–ª–∞–¥**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π –Ω–µ –≤ –ø–æ–ª–Ω—ã—Ö —è—â–∏–∫–∞—Ö

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ä—Ü–∏—è–º–∏
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –û—Å—Ç–∞—Ç–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–æ—Ä—Ü–∏—è—Ö –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ "—è—â–∏–∫–∏ / –ø–æ—Ä—Ü–∏–∏" –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ä—Ü–∏–π
- **–ò—Å—Ç–æ—Ä–∏—è**: –í—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—Ü–∏—è—Ö

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Dilovod

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `sent`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ `sentToDilovodAt`
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ Dilovod (`dilovodDocNumber`)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Frontend)

```typescript
import { useWarehouse } from '@/hooks/useWarehouse';

const { createMovement } = useWarehouse();

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
const newMovement = await createMovement({
  items: [
    {
      sku: 'PRODUCT-001',
      boxQuantity: 5.0,
      portionQuantity: 120,
      batchNumber: 'BATCH-001'
    }
  ],
  sourceWarehouse: '–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥',
  destinationWarehouse: '–ú–∞–ª—ã–π —Å–∫–ª–∞–¥',
  notes: '–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–ª—è —Ä–æ–∑–Ω–∏—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏'
});

console.log('–°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç:', newMovement.id);
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```typescript
const { getDrafts } = useWarehouse();

const drafts = await getDrafts();
console.log('–ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', drafts);
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞

```typescript
const { updateDraft } = useWarehouse();

const updatedDraft = await updateDraft(draftId, {
  items: [...], // –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
  deviations: [...], // –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
  notes: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è'
});
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Dilovod

```typescript
const { sendToDilovod } = useWarehouse();

const sentMovement = await sendToDilovod(movementId);
console.log('–î–æ–∫—É–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Dilovod');
```

### –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

```typescript
const { getProductsForMovement } = useWarehouse();

const products = await getProductsForMovement();
console.log('–¢–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏:', products);
```

### –†–∞–±–æ—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è

```typescript
const { getStockHistory } = useWarehouse();

const history = await getStockHistory({
  sku: 'PRODUCT-001',
  warehouse: '–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥',
  startDate: new Date('2025-01-01'),
  endDate: new Date('2025-12-31'),
  page: 1,
  limit: 50
});

console.log('–ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è:', history);
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤

```typescript
const { getCurrentStock } = useWarehouse();

const currentStock = await getCurrentStock('–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥');
console.log('–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏:', currentStock);
```

### Backend –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ API
const response = await fetch('/api/warehouse', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  credentials: 'include',
  body: JSON.stringify({
    items: [...],
    sourceWarehouse: '–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥',
    destinationWarehouse: '–ú–∞–ª—ã–π —Å–∫–ª–∞–¥',
    notes: '–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤'
  })
});

const movement = await response.json();
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

```typescript
const response = await fetch('/api/warehouse?status=draft&page=1&limit=20', {
  credentials: 'include'
});

const { movements, pagination } = await response.json();
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

1. **–ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–æ —Ç–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ –≤—Å–µ—Ö —Å–∫–ª–∞–¥–∞—Ö
2. **–ò—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –∏ —Å–∫–ª–∞–¥–æ–≤
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–∫–ª–∞–¥—ã –∏ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

1. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤, –æ—Ç—á–µ—Ç—ã –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
3. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥—É—â–∏—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–∫–∞–∑–æ–≤
5. **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–∫–ª–∞–¥–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª `server/test-warehouse-api.ts`:

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
npx ts-node server/test-warehouse-api.ts
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ SKU
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
curl -X GET "http://localhost:3000/api/warehouse" \
  -H "Cookie: session=your-session-cookie"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
curl -X POST "http://localhost:3000/api/warehouse" \
  -H "Content-Type: application/json" \
  -H "Cookie: session=your-session-cookie" \
  -d '{
    "items": [
      {
        "sku": "TEST-001",
        "boxQuantity": 2.0,
        "portionQuantity": 48,
        "batchNumber": "BATCH-001"
      }
    ],
    "sourceWarehouse": "–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥",
    "destinationWarehouse": "–ú–∞–ª—ã–π —Å–∫–ª–∞–¥",
    "notes": "–¢–µ—Å—Ç–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ"
  }'

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
curl -X GET "http://localhost:3000/api/warehouse/products-for-movement" \
  -H "Cookie: session=your-session-cookie"
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
curl -X GET "http://localhost:3000/api/warehouse/stock/history?sku=PRODUCT-001" \
  -H "Cookie: session=your-session-cookie"

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
curl -X GET "http://localhost:3000/api/warehouse/stock/current" \
  -H "Cookie: session=your-session-cookie"
```

### Frontend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Warehouse Movement (`/warehouse`) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞:**
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ —Å–ø–∏—Å–∫–∞
   - –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫

2. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫
   - –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Dilovod:**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
   - –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Dilovod"
   - **–û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

4. **–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞:**
   - –í—ã–±–µ—Ä–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫
   - –ù–∞–∂–º–∏—Ç–µ "–£–¥–∞–ª–∏—Ç—å"
   - **–û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ**

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: `üè™ [Warehouse] POST / - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞...`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: `üè™ [Warehouse] PUT /:id - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞...`
- –û—à–∏–±–∫–∏: `üö® [Warehouse] Error fetching products for movement:`

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
SELECT id, internalDocNumber, status, sourceWarehouse, destinationWarehouse
FROM warehouse_movement
ORDER BY createdAt DESC;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è
SELECT sku, warehouse, movementType, quantity, previousBalance, newBalance
FROM stock_movement_history
ORDER BY movementDate DESC;
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ –≤ API –∫–æ–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `server/routes/warehouse.ts` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 241 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `internalDocNumber`.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–ª–∂–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```typescript
// –í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è external –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
const totalCount = await prisma.warehouseMovement.count();
const nextDocNumber = (totalCount + 1).toString().padStart(5, '0');

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nextDocNumber
internalDocNumber: nextDocNumber,
```

### –°–∫–ª–∞–¥—ã –∏ –∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥: ID "1"
- –ö–∏–µ–≤—Å–∫–∏–π —Å–∫–ª–∞–¥: ID "2"
- –ú–∞–ª—ã–π —Å–∫–ª–∞–¥: ID "3"

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Å–∫–ª–∞–¥–æ–≤ –≤–º–µ—Å—Ç–æ hardcoded –∑–Ω–∞—á–µ–Ω–∏–π.

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Dilovod

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–æ–π –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

#### 1. **–ì–æ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (Race Conditions)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏, –Ω–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Dilovod –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:
```typescript
// –í —Ñ—É–Ω–∫—Ü–∏–∏ updateProductStock –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
async function updateProductStock(sku: string, sourceWarehouse: string, destinationWarehouse: string, quantity: number) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ç–æ–≤–∞—Ä –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  const lock = await getStockLock(sku);
  if (lock) {
    throw new Error(`–¢–æ–≤–∞—Ä ${sku} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏`);
  }

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
  await setStockLock(sku, 'internal_movement', 30000); // 30 —Å–µ–∫

  try {
    // –í—ã–ø–æ–ª–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
    // ...
  } finally {
    // –°–Ω–∏–º–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
    await releaseStockLock(sku);
  }
}
```

#### 2. **–ü–µ—Ä–µ–∑–∞–ø–∏—Å—å –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** Dilovod –∏–º–µ–µ—Ç –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–æ–π.

**–†–µ—à–µ–Ω–∏–µ:** –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏:
```typescript
async function updateProductStockSafe(sku: string, newStock: any) {
  const product = await prisma.product.findUnique({ where: { sku } });

  if (product.lastSyncAt && product.lastSyncAt > new Date(Date.now() - 5 * 60 * 1000)) {
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±—ã–ª–∞ –º–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥ - –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º
    console.warn(`‚ö†Ô∏è –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –æ—Å—Ç–∞—Ç–∫–∏ ${sku} - —Å–≤–µ–∂–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è`);
    return false;
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å—Ç–∞—Ç–∫–∏
  await prisma.product.update({
    where: { sku },
    data: {
      stockBalanceByStock: JSON.stringify(newStock),
      lastSyncAt: new Date()
    }
  });

  return true;
}
```

#### 3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç–∏–ø–æ–≤ —Å–∫–ª–∞–¥–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ID —Å–∫–ª–∞–¥–æ–≤ "1", "2", "3", –∞ Dilovod –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥—Ä—É–≥–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã.

**–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ —Å–∫–ª–∞–¥–æ–≤:
```typescript
const WAREHOUSE_MAPPING = {
  '1': 'dilovod_warehouse_main',    // –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥
  '2': 'dilovod_warehouse_kyiv',    // –ö–∏–µ–≤—Å–∫–∏–π —Å–∫–ª–∞–¥
  '3': 'dilovod_warehouse_small'    // –ú–∞–ª—ã–π —Å–∫–ª–∞–¥
};

// –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Dilovod
async function syncStockFromDilovod() {
  const dilovodStock = await dilovodApi.getStockBalance();

  for (const item of dilovodStock) {
    const internalWarehouseId = Object.keys(WAREHOUSE_MAPPING)
      .find(key => WAREHOUSE_MAPPING[key] === item.warehouseId);

    if (internalWarehouseId) {
      await updateProductStock(item.sku, internalWarehouseId, item.quantity);
    }
  }
}
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### 1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Dilovod API   ‚îÇ => ‚îÇ   Sync Queue    ‚îÇ => ‚îÇ  Local Database ‚îÇ
‚îÇ  (Source of    ‚îÇ    ‚îÇ  (Validation &  ‚îÇ    ‚îÇ   (Internal     ‚îÇ
‚îÇ    Truth)      ‚îÇ    ‚îÇ   Conflict      ‚îÇ    ‚îÇ   Operations)   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ  Resolution)   ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2. **–û—á–µ—Ä–µ–¥—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
```typescript
interface SyncQueueItem {
  sku: string;
  operation: 'update_stock' | 'internal_movement';
  priority: 'high' | 'normal' | 'low';
  data: any;
  timestamp: Date;
  lockUntil?: Date;
}

class StockSyncQueue {
  async enqueue(item: SyncQueueItem): Promise<void> {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
  }

  async processQueue(): Promise<void> {
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—á–µ—Ä–µ–¥—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
    // Dilovod sync –∏–º–µ–µ—Ç –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    // Internal movements - –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π
  }
}
```

#### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
```typescript
interface StockConflict {
  sku: string;
  dilovodStock: number;
  internalStock: number;
  lastSyncAt: Date;
  conflictType: 'stale_data' | 'concurrent_update' | 'warehouse_mismatch';
  resolution: 'dilovod_wins' | 'internal_wins' | 'manual_review';
}

class StockConflictMonitor {
  async detectConflicts(): Promise<StockConflict[]> {
    // –ù–∞—Ö–æ–¥–∏–º —Ç–æ–≤–∞—Ä—ã —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏
    const conflicts = await prisma.product.findMany({
      where: {
        OR: [
          { lastSyncAt: { lt: new Date(Date.now() - 10 * 60 * 1000) } },
          { stockBalanceByStock: { not: null } }
        ]
      }
    });

    return conflicts.map(product => ({
      sku: product.sku,
      // ... –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
    }));
  }

  async resolveConflict(conflict: StockConflict): Promise<void> {
    switch (conflict.resolution) {
      case 'dilovod_wins':
        await syncFromDilovod(conflict.sku);
        break;
      case 'internal_wins':
        // –ù–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑ Dilovod
        break;
      case 'manual_review':
        await createConflictAlert(conflict);
        break;
    }
  }
}
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è

#### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
```typescript
// –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
model StockLock {
  id          Int      @id @default(autoincrement())
  sku         String   @unique
  lockType    String   // 'dilovod_sync', 'internal_movement'
  lockedAt    DateTime @default(now())
  lockUntil   DateTime
  lockedBy    String   // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ 'system'
}
```

#### –®–∞–≥ 2: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
```typescript
async function updateProductStockWithLock(sku: string, ...args: any[]) {
  const lock = await acquireLock(sku, 'internal_movement');

  try {
    return await updateProductStock(sku, ...args);
  } finally {
    await releaseLock(sku);
  }
}
```

#### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ Dilovod —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
```typescript
// –í DilovodSyncManager.updateProductStockBalance
async function updateStockFromDilovodSafe(sku: string, ...args: any[]) {
  const lock = await acquireLock(sku, 'dilovod_sync');

  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª–æ –ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç
    const lastInternalMovement = await getLastInternalMovement(sku);

    if (lastInternalMovement && lastInternalMovement > new Date(Date.now() - 5 * 60 * 1000)) {
      console.warn(`‚ö†Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ${sku} –∏–∑ Dilovod - –Ω–µ–¥–∞–≤–Ω–µ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ`);
      return { success: false, message: 'Recent internal movement detected' };
    }

    return await updateProductStock(sku, ...args);
  } finally {
    await releaseLock(sku);
  }
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

#### 1. **–ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
```typescript
interface SyncMetrics {
  totalSyncs: number;
  successfulSyncs: number;
  conflictsDetected: number;
  conflictsResolved: number;
  averageSyncTime: number;
  lastSyncAt: Date;
}

class StockSyncMonitor {
  async getMetrics(): Promise<SyncMetrics> {
    // –°–æ–±–∏—Ä–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  }

  async sendAlerts(): Promise<void> {
    const conflicts = await detectConflicts();

    if (conflicts.length > 10) {
      await sendAlert('High conflict rate detected', {
        conflictCount: conflicts.length,
        timeWindow: '1 hour'
      });
    }
  }
}
```

#### 2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
```typescript
interface StockOperationLog {
  id: string;
  sku: string;
  operation: string;
  source: 'dilovod' | 'internal';
  beforeStock: any;
  afterStock: any;
  timestamp: Date;
  userId?: string;
  conflictDetected: boolean;
  resolution?: string;
}

class StockOperationLogger {
  async log(operation: StockOperationLog): Promise<void> {
    await prisma.stockOperationLog.create({ data: operation });
  }

  async getConflictHistory(sku: string): Promise<StockOperationLog[]> {
    return await prisma.stockOperationLog.findMany({
      where: {
        sku,
        conflictDetected: true
      },
      orderBy: { timestamp: 'desc' }
    });
  }
}
```

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π Dilovod —Ç—Ä–µ–±—É–µ—Ç:

1. **–ú–µ—Ö–∞–Ω–∏–∑–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
2. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö** (Dilovod –∫–∞–∫ Source of Truth)
3. **–í—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥–µ–∂–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### Backend (Node.js/Express + Prisma)

- **Routes:** `server/routes/warehouse.ts` - API endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è–º–∏
- **Database:** Prisma ORM —Å MySQL
- **Models:** `WarehouseMovement`, `StockMovementHistory`
- **Services:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ routes (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã)

### Frontend (React/TypeScript)

- **Page:** `client/pages/WarehouseMovement.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π UI
- **Hooks:** `client/hooks/useWarehouse.ts` - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Types:** `client/types/warehouse.ts` - TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **Components:** –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### WarehouseMovement.tsx
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —á–µ—Ä–µ–∑ useWarehouse —Ö—É–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### useWarehouse —Ö—É–∫
- API –º–µ—Ç–æ–¥—ã –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

---

## –í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–í–µ—Ä—Å–∏—è:** 2.4  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –î–µ–∫–∞–±—Ä—å 2024  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π v1.0+  
**–ê–≤—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** AI Assistant

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 2.0

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ API endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ API –∫–æ–¥–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –í–∫–ª—é—á–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è Frontend –∏ Backend
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 2.1

- ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ —Å –æ—Ç–∫–∞—Ç–æ–º –æ—Å—Ç–∞—Ç–∫–æ–≤**
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Dilovod —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Å—Ç–∞—Ç–∫–æ–≤**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π**
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ö—É–∫ useWarehouse —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è**
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏**

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 2.2

- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å Dilovod —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π**
- ‚úÖ **–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
- ‚úÖ **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—á–µ—Ä–µ–¥–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions**
- ‚úÖ **–í–Ω–µ–¥—Ä–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ç–æ–≤–∞—Ä–∞–º–∏**

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 2.4

- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ä—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
- ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –ø–æ—Ä—Ü–∏–∏ –≤–º–µ—Å—Ç–æ —è—â–∏–∫–æ–≤**
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateProductStock –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ä—Ü–∏—è–º–∏**
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è revertStockMovement –¥–ª—è –æ—Ç–º–µ–Ω—ã –≤ –ø–æ—Ä—Ü–∏—è—Ö**
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è createStockMovementHistory –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ø–æ—Ä—Ü–∏—è—Ö**
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Dilovod —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –ø–æ—Ä—Ü–∏–π**
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ—Ä—Ü–∏—è–º–∏**
