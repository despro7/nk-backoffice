# Быстрый старт: Синхронизация товаров с Dilovod

## Что нового

Теперь система поддерживает полную синхронизацию товаров и комплектов с Dilovod, используя проверенную логику из PHP-версии.

## Быстрая настройка

### 1. Переменные окружения

Добавьте в `.env`:

```env
DILOVOD_API_URL=https://your-dilovod-instance.com/api
DILOVOD_API_KEY=your-api-key-here
WORDPRESS_DATABASE_URL=mysql://user:password@localhost:3306/wordpress_db
```

### 2. Запуск сервера

```bash
npm run dev
```

### 3. Тестирование синхронизации

1. Откройте страницу "Комплекти товарів"
2. **Нажмите "Синхронізувати з Dilovod"** для получения данных из Dilovod
3. Дождитесь завершения процесса
4. Проверьте результаты в таблице

## Что происходит при синхронизации

### Этап 1: Получение SKU
- Система получает список SKU товаров в наличии из WordPress
- Использует кеширование для оптимизации (24 часа)

### Этап 2: Запрос к Dilovod
- Запрос к регистру `goodsPrices` для получения цен
- Идентификация комплектов по parent ID
- Детальный запрос `getObject` для комплектов

### Этап 3: Обработка данных
- Парсинг цен по типам (розничная, оптовая, акционная)
- Категоризация товаров
- Извлечение состава комплектов

### Этап 4: Сохранение в БД
- Создание новых товаров
- Обновление существующих
- Сохранение комплектов и дополнительных цен

## Результат синхронизации

После успешной синхронизации вы увидите:

- ✅ Количество синхронизированных товаров
- ✅ Количество комплектов
- ✅ Обновленную таблицу товаров
- ✅ Время последней синхронизации

## Обработка ошибок

Система автоматически:
- Продолжает работу при ошибках отдельных товаров
- Логирует все ошибки для диагностики
- Показывает детальную информацию об ошибках

## Мониторинг

Следите за процессом в:
- Интерфейсе (статус синхронизации)
- Консоли сервера (детальные логи)
- Таблице товаров (результаты)

## Требования

- Роль пользователя: `admin` или `boss`
- Настроенные переменные окружения
- Доступ к Dilovod API
- Подключение к WordPress базе данных
