# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑–∞–ø—É—Å–∫—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## ‚úÖ –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- ‚úÖ Node.js 16+
- ‚úÖ MySQL 5.7+
- ‚úÖ Prisma CLI –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏–π (`npm run build`)

## üì¶ –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –ë–î

–û—Å–∫—ñ–ª—å–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `reporting_day_start_hour` –≤–∂–µ –º–∞—î –±—É—Ç–∏ —É –ë–î, –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd d:\Projects\nk-food.shop\nova-field

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
npm run prisma migrate deploy

# –ê–±–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Å
npm run prisma studio
# –ê–±–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ SQL:
# INSERT INTO settings_base (key, value, description, category, isActive)
# VALUES ('reporting_day_start_hour', '0', 'Start hour for reporting day', 'reporting', 1)
```

## üîß –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä
npm run dev
# –∞–±–æ
npm start

# –°–µ—Ä–≤–µ—Ä –ø–æ–≤–∏–Ω–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç–∏—Å—è –Ω–∞ http://localhost:8080
```

## üíª –ö—Ä–æ–∫ 3: –í—ñ–¥–∫—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

```
http://localhost:5173/settings/admin
```

(–∞–±–æ –∑–∞–º—ñ—Å—Ç—å `5173` —Ç–æ–π –ø–æ—Ä—Ç, –Ω–∞ —è–∫–æ–º—É –ø—Ä–∞—Ü—é—î Vite)

## üß™ –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

### 4.1 –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

1. **–ü–µ—Ä–µ–π—Ç–∏** –≤ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤
2. **–û—á—ñ–∫—É—î—Ç—å—Å—è:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è, –ø–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 0)
3. **–°—Ç–∞—Ç—É—Å:** ‚úÖ PASS / ‚ùå FAIL

### 4.2 –¢–µ—Å—Ç 2: –ó–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. **–í–∏–∫–æ–Ω–∞—Ç–∏:** –û–±—Ä–∞—Ç–∏ –∑ Select –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `16`
2. **–ù–∞—Ç–∏—Å–Ω—É—Ç–∏:** –ö–Ω–æ–ø–∫–∞ "–ó–±–µ—Ä–µ–≥—Ç–∏"
3. **–û—á—ñ–∫—É—î—Ç—å—Å—è:** 
   - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö ("–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–¥–∏–Ω–∏ –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ")
   - –ó–Ω–∞—á–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –ë–î
4. **–°—Ç–∞—Ç—É—Å:** ‚úÖ PASS / ‚ùå FAIL

### 4.3 –¢–µ—Å—Ç 3: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

1. **–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤—Å—Ç–∞–≤–∏—Ç–∏:** –ó–Ω–∞—á–µ–Ω–Ω—è –º–µ–Ω—à–µ 0 –∞–±–æ –±—ñ–ª—å—à–µ 23
2. **–û—á—ñ–∫—É—î—Ç—å—Å—è:** –ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
3. **–°—Ç–∞—Ç—É—Å:** ‚úÖ PASS / ‚ùå FAIL

### 4.4 –¢–µ—Å—Ç 4: API —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# 1. –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
curl -X GET http://localhost:8080/api/settings/reporting-day-start-hour \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Cookie: sessionId=YOUR_SESSION_ID"

# –û—á—ñ–∫—É—î—Ç—å—Å—è:
# {"dayStartHour": 16}

# 2. –û–Ω–æ–≤–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è
curl -X PUT http://localhost:8080/api/settings/reporting-day-start-hour \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Cookie: sessionId=YOUR_SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{"dayStartHour": 20}'

# –û—á—ñ–∫—É—î—Ç—å—Å—è:
# {"success": true, "message": "Reporting day start hour updated successfully", "dayStartHour": 20}
```

### 4.5 –¢–µ—Å—Ç 5: –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–≤—ñ—Ç–Ω–æ—ó –¥–∞—Ç–∏

1. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏** dayStartHour = 16
2. **–ü–µ—Ä–µ–π—Ç–∏** –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑—ñ –∑–≤—ñ—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "–ó–≤—ñ—Ç –ø—Ä–æ –ø—Ä–æ–¥–∞–∂–∏")
3. **–í–∏–±—Ä–∞—Ç–∏** –¥–∞—Ç—É 18.10.2024
4. **–û—á—ñ–∫—É—î—Ç—å—Å—è:** –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   - –æ 18.10 16:00:00 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 18.10
   - –æ 18.10 15:59:59 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 17.10
   - –æ 18.10 16:00:01 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 19.10
5. **–°—Ç–∞—Ç—É—Å:** ‚úÖ PASS / ‚ùå FAIL

### 4.6 –¢–µ—Å—Ç 6: –ì—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ —Ç–∞–±–ª–∏—Ü—ñ

1. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏** dayStartHour = 16
2. **–ü–µ—Ä–µ–π—Ç–∏** –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏:
   - "–ì—Ä–∞—Ñ—ñ–∫ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤"
   - "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤"
   - "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–∞—Ç–∞–º–∏"
3. **–û—á—ñ–∫—É—î—Ç—å—Å—è:** –î–∞–Ω—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –Ω–æ–≤–æ—ó –≥–æ–¥–∏–Ω–∏
4. **–°—Ç–∞—Ç—É—Å:** ‚úÖ PASS / ‚ùå FAIL

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤

### –°–µ—Ä–≤–µ—Ä

```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–≤–∏–Ω–Ω—ñ –º—ñ—Å—Ç–∏—Ç–∏:
# ‚úÖ "GET /api/settings/reporting-day-start-hour"
# ‚úÖ "PUT /api/settings/reporting-day-start-hour"
# ‚úÖ –ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ –∑–≤—ñ—Ç—É: "–†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –∑–≤—ñ—Ç–Ω–∞ –¥–∞—Ç–∞..."
```

### –ë—Ä–∞—É–∑–µ—Ä (DevTools Console)

```javascript
// –û—á—ñ–∫—É—î—Ç—å—Å—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ —Ç–∏–ø—É:
// ‚ùå "fetch failed"
// ‚ùå "Unauthorized"
// ‚ùå "Type Error"
```

## üêõ –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –Ø–∫—â–æ API –Ω–µ –ø—Ä–∞—Ü—é—î:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é:**
```bash
curl -X GET http://localhost:8080/api/settings/reporting-day-start-hour
# –û—á—ñ–∫—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞ 401 (Unauthorized) - —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ —Ç–æ–∫–µ–Ω—É
```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω:**
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å —ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω –∑ localStorage
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –≤ –∑–∞–ø–∏—Ç—ñ
```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ë–î:**
```sql
SELECT * FROM settings_base WHERE key = 'reporting_day_start_hour';
-- –ü–æ–≤–∏–Ω–µ–Ω –≤–∏–≤–µ—Å—Ç–∏ –æ–¥–∏–Ω —Ä—è–¥–æ–∫ –∑ –∑–Ω–∞—á–µ–Ω–Ω—è–º
```

### –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è:

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–µ—Ä–µ–∂—É (F12 ‚Üí Network tab)
3. –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π

### –Ø–∫—â–æ –∑–≤—ñ—Ç–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è:

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è: 
```bash
curl -X GET http://localhost:8080/api/settings/reporting-day-start-hour
```

2. –ü–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑–≤—ñ—Ç—ñ–≤
3. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `?sync=true` –¥–ª—è –ø–µ—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

## üìù –ó–∞–ø—Ä–æ—Ç–æ–∫–æ–ª—é–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—é –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º—ñ—Ç–∫–∏ |
|---|---|---|
| 1. –ë–∞–∑–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è | ‚úÖ/‚ùå | |
| 2. –ó–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è | ‚úÖ/‚ùå | |
| 3. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö | ‚úÖ/‚ùå | |
| 4. API —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è | ‚úÖ/‚ùå | |
| 5. –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–∞—Ç | ‚úÖ/‚ùå | |
| 6. –ì—Ä–∞—Ñ—ñ–∫–∏/—Ç–∞–±–ª–∏—Ü—ñ | ‚úÖ/‚ùå | |

## üéâ –£—Å–ø—ñ—à–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

–Ø–∫—â–æ –≤—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ñ (‚úÖ), —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!

## üìû –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–ø–æ–º–æ–≥–∏

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–∞–π–ª `Docs/REPORTING_DAY_START_HOUR.md`
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏–∫–æ–Ω–∞–Ω—ñ –≤—Å—ñ –∫—Ä–æ–∫–∏ –∑–∞–ø—É—Å–∫—É
