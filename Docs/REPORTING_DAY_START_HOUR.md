# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–¥–∏–Ω–∏ –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üìã –û–≥–ª—è–¥

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–¥–∏–Ω–∏ –ø–æ—á–∞—Ç–∫—É –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ –∑–≤—ñ—Ç—ñ–≤. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–≤–∞—Ç–∏ –ø–µ—Ä—ñ–æ–¥ –∑–≤—ñ—Ç—É–≤–∞–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—ó –æ–ø—ñ–≤–Ω–æ—á—ñ (00:00).

## üéØ –ú–µ—Ç–∞

–î–æ–∑–≤–æ–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—É –≥–æ–¥–∏–Ω—É —è–∫ –ø–æ—á–∞—Ç–æ–∫ –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:
- –ó–∞–º—ñ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó 00:00 (–ø–æ–ª—É–Ω—ñ—á—å)
- –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ 16:00 –¥–ª—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö –∑–≤—ñ—Ç–Ω–∏—Ö –ø–µ—Ä—ñ–æ–¥—ñ–≤

## üìù –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `dayStartHour = 16`:

```
–ó–≤—ñ—Ç–Ω–∏–π –¥–µ–Ω—å 18 –∂–æ–≤—Ç–Ω—è –≤–∫–ª—é—á–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑ 17.10 16:00:01 –¥–æ 18.10 16:00:00
‚îú‚îÄ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ 18.10 16:00:00 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 18.10 ‚úÖ
‚îú‚îÄ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ 18.10 15:59:59 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 17.10 ‚úÖ
‚îî‚îÄ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ 18.10 16:00:01 ‚Üí –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∑–≤—ñ—Ç –∑–∞ 19.10 ‚úÖ
```

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### 1. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
**–¢–∞–±–ª–∏—Ü—è:** `settings_base`
**–ö–ª—é—á:** `reporting_day_start_hour`
**–ó–Ω–∞—á–µ–Ω–Ω—è:** `0-23` (–≥–æ–¥–∏–Ω–∞, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `0`)

```sql
-- –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Å—É:
INSERT INTO settings_base (key, value, description, category, isActive)
VALUES (
  'reporting_day_start_hour',
  '16',
  'Start hour for reporting day (0-23, 0 = midnight)',
  'reporting',
  1
)
```

### 2. Backend (Node.js + Express)

#### API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

**GET `/api/settings/reporting-day-start-hour`**
- –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è: ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–∞

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "dayStartHour": 16
}
```

**PUT `/api/settings/reporting-day-start-hour`**
- –û–Ω–æ–≤–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è: ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–∞

–ó–∞–ø–∏—Ç:
```json
{
  "dayStartHour": 16
}
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "success": true,
  "message": "Reporting day start hour updated successfully",
  "dayStartHour": 16
}
```

#### Utility –§—É–Ω–∫—Ü—ñ—ó (`server/lib/utils.ts`)

**`getReportingDayStartHour(): Promise<number>`**
- –û—Ç—Ä–∏–º—É—î —á–∞—Å –ø–æ—á–∞—Ç–∫—É –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø–æ–≤–µ—Ä—Ç–∞—î 0 (–ø–æ–ª—É–Ω—ñ—á—å)

**`getReportingDate(orderDate: Date, dayStartHour: number = 0): string`**
- –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –∑–≤—ñ—Ç–Ω—É –¥–∞—Ç—É –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞—Ç—É —É —Ñ–æ—Ä–º–∞—Ç—ñ `YYYY-MM-DD`
- –Ø–∫—â–æ —á–∞—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è >= `dayStartHour`, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–ª–µ–∂–∏—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –¥–Ω—é

```typescript
const reportingDate = getReportingDate(new Date('2024-10-18T15:30:00'), 16);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: '2024-10-18' (–æ—Å–∫—ñ–ª—å–∫–∏ 15:30 < 16:00)

const reportingDate2 = getReportingDate(new Date('2024-10-18T16:30:00'), 16);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: '2024-10-19' (–æ—Å–∫—ñ–ª—å–∫–∏ 16:30 >= 16:00)
```

**`getReportingDateRange(reportingDate: string, dayStartHour: number = 0): {start: Date; end: Date}`**
- –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä—É –∑–≤—ñ—Ç—ñ–≤
- –ü–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç –∑ –ø–æ—á–∞—Ç–∫–æ–º —Ç–∞ –∫—ñ–Ω—Ü–µ–º –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è

```typescript
const range = getReportingDateRange('2024-10-18', 16);
// range.start = 2024-10-18T16:00:00
// range.end = 2024-10-19T15:59:59.999
```

#### –ú–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

–ù–∞—Å—Ç—É–ø–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –±—É–ª–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `dayStartHour`:

1. **GET `/api/orders/products/stats`** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
2. **GET `/api/orders/products/stats/dates`** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑ —Ä–æ–∑–±–∏–≤–∫–æ—é –ø–æ –¥–∞—Ç–∞—Ö
3. **GET `/api/orders/products/chart`** - –î–∞–Ω—ñ –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—É
4. **GET `/api/orders/sales/report`** - –ó–≤—ñ—Ç –ø—Ä–æ –ø—Ä–æ–¥–∞–∂—ñ

–í—Å–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ: –∑–∞–º—ñ—Å—Ç—å –ø—Ä—è–º–æ–≥–æ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –¥–∞—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è `getReportingDate()` —ñ `getReportingDateRange()`.

### 3. Frontend (React + TypeScript)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ReportingDayStartHourSettings`

–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è: `client/components/ReportingDayStartHourSettings.tsx`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- üìä –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ
- üéõÔ∏è –í–∏–±—ñ—Ä –≥–æ–¥–∏–Ω–∏ (0-23) —á–µ—Ä–µ–∑ Select –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚ö†Ô∏è –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –≤–ø–ª–∏–≤ –Ω–∞ –∑–≤—ñ—Ç–∏
- ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö/–ø–æ–º–∏–ª–∫—É

**Props:**
```typescript
interface ReportingDayStartHourSettingsProps {
  onClose?: () => void;
}
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```tsx
import { ReportingDayStartHourSettings } from '@/components/ReportingDayStartHourSettings';

export const MyComponent = () => {
  return <ReportingDayStartHourSettings />;
};
```

#### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π –≤ `client/pages/SettingsAdmin.tsx`:

```tsx
<section>
  <h2 className="text-2xl font-semibold mb-2">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤</h2>
  <p className="text-sm text-gray-600 mb-4">
    –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∑–≤—ñ—Ç—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  </p>
  <ReportingDayStartHourSettings />
</section>
```

## üîÑ –õ–æ–≥—ñ–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É

### –û—Å–Ω–æ–≤–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º

```typescript
function getReportingDate(orderDate: Date, dayStartHour: number): string {
  const date = new Date(orderDate);
  
  // –Ø–∫—â–æ —á–∞—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è >= —á–∞—Å—É –ø–æ—á–∞—Ç–∫—É –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è,
  // —Ç–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–ª–µ–∂–∏—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –¥–Ω—é
  if (date.getHours() >= dayStartHour) {
    date.setDate(date.getDate() + 1);
  }
  
  // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–∞—Ç—É —É —Ñ–æ—Ä–º–∞—Ç—ñ YYYY-MM-DD
  return formatDate(date);
}
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤

| –ß–∞—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è | dayStartHour | –ó–≤—ñ—Ç–Ω–∞ –¥–∞—Ç–∞ | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
|---|---|---|---|
| 2024-10-17 15:30:00 | 16 | 2024-10-17 | 15:30 < 16:00 ‚Üí —Ç–æ–π –∂–µ –¥–µ–Ω—å |
| 2024-10-17 16:00:00 | 16 | 2024-10-18 | 16:00 ‚â• 16:00 ‚Üí –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å |
| 2024-10-17 16:00:01 | 16 | 2024-10-18 | 16:00 ‚â• 16:00 ‚Üí –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å |
| 2024-10-17 23:59:59 | 16 | 2024-10-18 | 23:59 ‚â• 16:00 ‚Üí –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å |
| 2024-10-18 15:30:00 | 16 | 2024-10-18 | 15:30 < 16:00 ‚Üí —Ç–æ–π –∂–µ –¥–µ–Ω—å |
| 2024-10-18 16:00:00 | 16 | 2024-10-19 | 16:00 ‚â• 16:00 ‚Üí –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å |

## üîê –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ –í—Å—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω—ñ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω–Ω—è (0-23)
- ‚úÖ –¢—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–º—ñ–Ω –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

## üìö –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å

- ‚úÖ **–ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å:** –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (0 = –ø–æ–ª—É–Ω—ñ—á—å)
- ‚úÖ **–Ü—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ:** –£—Å—ñ —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ –∑–≤—ñ—Ç–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ **–î–∏–Ω–∞–º—ñ—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞:** –ó–≤—ñ—Ç–∏ –ø–µ—Ä–µ—Å—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

## ‚ö° –ö–µ—à

- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É—î—Ç—å—Å—è –Ω–∞ 5 —Ö–≤–∏–ª–∏–Ω
- üîÑ –ü—Ä–∏ –∑–º—ñ–Ω—ñ `dayStartHour` –∫–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —ñ–Ω–≤–∞–ª—ñ–¥—É—î—Ç—å—Å—è –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É
- üí° –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `sync=true` –¥–ª—è —Å–∏–ª—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ—Å—Ä–∞—Ö–æ–≤—É–≤–∞–Ω–Ω—è

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
curl -X GET http://localhost:8080/api/settings/reporting-day-start-hour \
  -H "Authorization: Bearer YOUR_TOKEN"

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
curl -X PUT http://localhost:8080/api/settings/reporting-day-start-hour \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"dayStartHour": 16}'
```

### –¢–µ—Å—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

1. **–ë–∞–∑–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π:**
   - –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ dayStartHour = 16
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

2. **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
   - dayStartHour = 0 (–ø–æ–ª—É–Ω—ñ—á—å) - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
   - dayStartHour = 23 - –Ω–∞–π–ø—ñ–∑–Ω—ñ—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è
   - –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ 24 - –º–∞—î –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–∞

3. **–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç:**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≥—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞—Ç–∏
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —Ç–∞–±–ª–∏—Ü—ñ –∑–≤—ñ—Ç—ñ–≤ –≥—Ä—É–ø—É—é—Ç—å –¥–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

### –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–∏—Ö –∑–≤—ñ—Ç–Ω–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤:

1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ `dayStartHour` –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó:
```typescript
const dayStartHour = await getReportingDayStartHour();
```

2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `getReportingDate()` –ø—Ä–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –¥–∞—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å:
```typescript
const dateKey = getReportingDate(new Date(order.orderDate), dayStartHour);
```

3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `getReportingDateRange()` –ø—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—ñ –∑–∞ –¥–∞—Ç–∞–º–∏:
```typescript
const startRange = getReportingDateRange(startDate as string, dayStartHour);
const endRange = getReportingDateRange(endDate as string, dayStartHour);
```

### –ö–æ–Ω–≤–µ–Ω—Ü—ñ—ó –∫–æ–¥—É–≤–∞–Ω–Ω—è:

- –í—Å—ñ –∑–≤—ñ—Ç–Ω—ñ –¥–∞—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ `YYYY-MM-DD`
- `dayStartHour` –∑–∞–≤–∂–¥–∏ 0-23 (—á–∏—Å–ª–æ)
- –§—É–Ω–∫—Ü—ñ—ó —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞—Ç–∞–º–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —É `server/lib/utils.ts`

## üìñ –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- **–¢–ó:** `–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–¥–∏–Ω–∏ –ø–æ—á–∞—Ç–∫—É –∑–≤—ñ—Ç–Ω–æ–≥–æ –¥–Ω—è`
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** –î–∏–≤. `/api/settings/reporting-day-start-hour`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** `ReportingDayStartHourSettings.tsx`
- **–£—Ç—ñ–ª—ñ—Ç–∏:** `server/lib/utils.ts`

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –ë–î (—è–∫—â–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ)
2. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
3. –û–Ω–æ–≤–∏—Ç–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ë–î –º—ñ—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å `reporting_day_start_hour`
4. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
