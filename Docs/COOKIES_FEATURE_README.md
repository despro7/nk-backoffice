# Функціональність збереження режиму пакування в куки

## Опис

Додано можливість зберігати вибраний режим пакування коробок (`economical` або `spacious`) в куки браузера. Це дозволяє користувачам зберігати свої налаштування між сесіями.

## Що реалізовано

### 1. Утиліти для роботи з куками (`client/lib/cookieUtils.ts`)

- `setCookie(name, value, options)` - встановлення куки з опціями
- `getCookie(name)` - отримання значення куки
- `deleteCookie(name, path)` - видалення куки
- `areCookiesEnabled()` - перевірка підтримки куков браузером

### 2. Оновлений компонент `BoxSelector`

- **Автоматичне відновлення режиму** при завантаженні сторінки
- **Збереження режиму** при кожній зміні
- **Кнопка скидання** збереженого режиму
- **Візуальні індикатори** статусу збереження

### 3. Тестовий файл (`test-cookies.html`)

HTML сторінка для тестування функціональності куков без запуску основного додатку.

## Як це працює

### Збереження режиму

```typescript
// При зміні режиму автоматично зберігається в куки
const handleModeChange = useCallback((newMode: BoxRecommendationMode) => {
  setRecommendationMode(newMode);
  // Зберігаємо на 30 днів
  setCookie(BOX_MODE_COOKIE, newMode, { expires: 30 });
}, [BOX_MODE_COOKIE]);
```

### Відновлення режиму

```typescript
// При ініціалізації компонента
const [recommendationMode, setRecommendationMode] = useState<BoxRecommendationMode>(() => {
  const savedMode = getCookie(BOX_MODE_COOKIE);
  return (savedMode === 'spacious' || savedMode === 'economical') ? savedMode : 'economical';
});
```

### Скидання режиму

```typescript
const handleResetMode = useCallback(() => {
  const defaultMode: BoxRecommendationMode = 'economical';
  setRecommendationMode(defaultMode);
  // Видаляємо збережений режим
  deleteCookie(BOX_MODE_COOKIE);
}, [BOX_MODE_COOKIE]);
```

## Технічні деталі

### Назва куки
- `nova_box_recommendation_mode` - унікальна назва для режиму пакування

### Термін дії
- Кука зберігається на **30 днів**
- Автоматично видаляється браузером після закінчення терміну

### Безпека
- Використовується `SameSite=Lax` за замовчуванням
- Підтримка `Secure` флагу для HTTPS
- Валідація значень перед збереженням

## Використання

### Для користувачів

1. **Виберіть режим пакування** (економічний або просторний)
2. **Режим автоматично збережеться** в браузері
3. **При наступному відвідуванні** режим буде відновлено
4. **Для скидання** натисніть кнопку "Скинути збережений режим"

### Для розробників

```typescript
import { setCookie, getCookie, deleteCookie } from '../lib/cookieUtils';

// Встановлення куки
setCookie('my_setting', 'value', { expires: 7 });

// Отримання значення
const value = getCookie('my_setting');

// Видалення куки
deleteCookie('my_setting');
```

## Тестування

### 1. Запустіть тестовий файл
```bash
# Відкрийте в браузері
test-cookies.html
```

### 2. Тестуйте основну функціональність
- Встановіть різні режими
- Перезавантажте сторінку
- Перевірте відновлення налаштувань
- Протестуйте скидання

### 3. Перевірте в DevTools
- Відкрийте **Application** → **Cookies**
- Знайдіть куку `nova_box_recommendation_mode`
- Перевірте значення та термін дії

## Обмеження

- **Розмір куки**: максимум 4KB
- **Кількість кук**: залежить від браузера (зазвичай 50-100)
- **Термін дії**: максимум 400 днів (обмеження браузера)
- **Безпека**: куки передаються з кожним HTTP запитом

## Майбутні покращення

- [ ] Збереження додаткових налаштувань (розмір коробок, вага тощо)
- [ ] Синхронізація налаштувань між пристроями
- [ ] Експорт/імпорт налаштувань користувача
- [ ] Групування налаштувань по профілях

## Підтримка браузерів

- ✅ Chrome 80+
- ✅ Firefox 78+
- ✅ Safari 13+
- ✅ Edge 80+
- ⚠️ IE 11 (обмежена підтримка)

## Допомога

Якщо виникли проблеми:

1. Перевірте, чи увімкнені куки в браузері
2. Очистіть куки для домену
3. Перевірте консоль браузера на помилки
4. Запустіть тестовий файл для діагностики
